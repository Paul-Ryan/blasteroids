!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){!function(e){var s,i={},n={16:!1,18:!1,17:!1,91:!1},r="all",o={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},a={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},h=function(t){return a[t]||t.toUpperCase().charCodeAt(0)},c=[];for(s=1;s<20;s++)a["f"+s]=111+s;function l(t,e){for(var s=t.length;s--;)if(t[s]===e)return s;return-1}function u(t,e){if(t.length!=e.length)return!1;for(var s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}var d={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"};function f(t){for(s in n)n[s]=t[d[s]]}function p(t,e,s){var n,r;n=v(t),void 0===s&&(s=e,e="all");for(var o=0;o<n.length;o++)r=[],(t=n[o].split("+")).length>1&&(r=g(t),t=[t[t.length-1]]),t=t[0],(t=h(t))in i||(i[t]=[]),i[t].push({shortcut:n[o],scope:e,method:s,key:n[o],mods:r})}for(s in o)p[s]=!1;function m(){return r||"all"}function v(t){var e;return""==(e=(t=t.replace(/\s/g,"")).split(","))[e.length-1]&&(e[e.length-2]+=","),e}function g(t){for(var e=t.slice(0,t.length-1),s=0;s<e.length;s++)e[s]=o[e[s]];return e}function y(t,e,s){t.addEventListener?t.addEventListener(e,s,!1):t.attachEvent&&t.attachEvent("on"+e,function(){s(window.event)})}y(document,"keydown",function(t){!function(t){var e,s,r,a,h,u;if(e=t.keyCode,-1==l(c,e)&&c.push(e),93!=e&&224!=e||(e=91),e in n)for(r in n[e]=!0,o)o[r]==e&&(p[r]=!0);else if(f(t),p.filter.call(this,t)&&e in i)for(u=m(),a=0;a<i[e].length;a++)if((s=i[e][a]).scope==u||"all"==s.scope){for(r in h=s.mods.length>0,n)(!n[r]&&l(s.mods,+r)>-1||n[r]&&-1==l(s.mods,+r))&&(h=!1);(0!=s.mods.length||n[16]||n[18]||n[17]||n[91])&&!h||!1===s.method(t,s)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}(t)}),y(document,"keyup",function(t){var e,s=t.keyCode,i=l(c,s);if(i>=0&&c.splice(i,1),93!=s&&224!=s||(s=91),s in n)for(e in n[s]=!1,o)o[e]==s&&(p[e]=!1)}),y(window,"focus",function(){for(s in n)n[s]=!1;for(s in o)p[s]=!1});var M=e.key;e.key=p,e.key.setScope=function(t){r=t||"all"},e.key.getScope=m,e.key.deleteScope=function(t){var e,s,n;for(e in i)for(s=i[e],n=0;n<s.length;)s[n].scope===t?s.splice(n,1):n++},e.key.filter=function(t){var e=(t.target||t.srcElement).tagName;return!("INPUT"==e||"SELECT"==e||"TEXTAREA"==e)},e.key.isPressed=function(t){return"string"==typeof t&&(t=h(t)),-1!=l(c,t)},e.key.getPressedKeyCodes=function(){return c.slice(0)},e.key.noConflict=function(){var t=e.key;return e.key=M,t},e.key.unbind=function(t,e){var s,n,r,o,a,c=[];for(s=v(t),o=0;o<s.length;o++){if((n=s[o].split("+")).length>1&&(c=g(n)),t=n[n.length-1],t=h(t),void 0===e&&(e=m()),!i[t])return;for(r=0;r<i[t].length;r++)(a=i[t][r]).scope===e&&u(a.mods,c)&&(i[t][r]={})}},t.exports=p}(this)},function(t,e,s){"use strict";s.r(e);const i={objDistance(t,e){const s=Math.pow(t.pos[0]-e.pos[0],2),i=Math.pow(t.pos[1]-e.pos[1],2);return Math.sqrt(s+i)},normalize(t){const e=this.distance([0,0],t);return e<=0?[0,0]:[t[0]/e,t[1]/e]},distance:(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),norm(t){if(0===t[0]&&0===t[1])return[0,0];const e=i.distance([0,0],t);return[t[0]/e,t[1]/e]},length:t=>Math.sqrt(t[0]*t[0]+(t[1]+t[1])),randomVec(t){const e=2*Math.PI*Math.random();return i.scale([Math.sin(e),Math.cos(e)],t)},scale:(t,e)=>[t[0]*e,t[1]*e]};var n=i;var r=class{constructor(t,e){this.x=t,this.y=e}add(t){this.x+=t.x,this.y+=t.y}divide(t){this.x/=t,this.y/=t}limit(t){this.magnitude()>t&&(this.normalize(),this.scale(t))}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normalize(){var t=this.magnitude();t>0&&this.divide(t)}scale(t){this.x*=t,this.y*=t}subtract(t){this.x-=t.x,this.y-=t.y}};var o=class{constructor(t){this.pos=t.pos,this.vel=t.vel||new r(0,0),this.acc=t.acc||new r(-.001,.01),this.radius=t.radius,this.color=t.color,this.game=t.game,this.wraps=!0,this.maxSpeed=3}collideWith(t){}isCollidedWith(t){const e=this.radius+t.radius;return n.objDistance(this,t)<e}move(t){this.game.isOutOfBounds(this.pos)&&(this.wraps?this.game.wrapPos(this.pos):this.game.remove(this)),this.vel.add(this.acc),this.vel.limit(this.maxSpeed),this.pos.add(this.vel)}render(t){t.fillStyle=this.color,t.beginPath(),t.arc(this.pos.y,this.pos.y,this.radius,0,2*Math.PI,!1),t.fill()}};class a extends o{constructor(t){super(t),this.color=a.COLOR,this.radius=a.RADIUS,this.wraps=!1}collideWith(t){t instanceof d&&(this.game.remove(t),this.game.remove(this))}}a.SPEED=10,a.COLOR="#251351",a.RADIUS=40;var h=a;const c={COLOR:"#251351",RADIUS:10,VELOCITY:[0,0]};var l=class extends o{constructor(t={}){super(t),this.color=c.COLOR,this.radius=c.RADIUS,this.vel=c.VELOCITY}fireBullet(){const t=n.norm(this.vel),e=n.scale(t,h.SPEED),s=[this.vel[0]+e[0],this.vel[1]+e[1]],i=new h({vel:s,pos:this.pos,game:this.game});this.game.add(i)}power(t){this.vel[0]+=t[0],this.vel[1]+=t[1]}respawn(){this.pos=this.game.center(),this.vel=[0,0]}};const u={COLOR:"#7D2E68",RADIUS:30,SPEED:8};var d=class extends o{constructor(t={}){super(t),this.color=u.COLOR,this.radius=u.RADIUS}collideWith(t){t instanceof l&&t.respawn()}};class f{constructor(){this.asteroids=[],this.bullets=[],this.ships=[],this.addAsteroids()}add(t){if(t instanceof l)this.ships.push(t);else if(t instanceof d)this.asteroids.push(t);else{if(!(t instanceof h))throw new Error("unknown object");this.bullets.push(t)}}addAsteroids(){for(;this.asteroids.length<f.NUM_ASTEROIDS;){let t=new d({pos:new r(...this.randomPos()),game:this});this.add(t)}}addShips(){const t=new l({pos:this.center(),game:this});return this.add(t),t}allGameObjects(){return[].concat(this.asteroids,this.ships,this.bullets)}center(){return[f.DIM_X/2,f.DIM_Y/2]}checkCollisions(){const t=this.allGameObjects();for(let e=0;e<t.length;e++)for(let s=0;s<t.length;s++){if(e===s)continue;let i=t[e],n=t[s];if(i.isCollidedWith(n)){if(i.collideWith(n))return}}}draw(t){t.clearRect(0,0,f.DIM_X,f.DIM_Y),this.allGameObjects().forEach(e=>e.render(t))}isOutOfBounds(t){return t.x<0||t.y<0||t.x>f.DIM_X||t.y>f.DIM_Y}moveObjects(t){this.allGameObjects().forEach(e=>{e.move(t)})}randomPos(){return[Math.floor(Math.random()*(f.DIM_X+1)),Math.floor(Math.random()*(f.DIM_Y+1))]}remove(t){if(t instanceof d){const e=this.asteroids.indexOf(t);-1!==e&&this.asteroids.splice(e,1)}else if(t instanceof h){const e=this.bullets.indexOf(t);-1!==e&&this.bullets.splice(e,1)}else if(t instanceof l){const e=this.ships.indexOf(t);-1!==e&&this.ships.splice(e,1)}}step(t){this.moveObjects(t),this.checkCollisions()}wrapPos(t){t.x<0?t.x=f.DIM_X:t.x>f.DIM_X&&(t.x=t.x%f.DIM_X),t.y<0?t.y=f.DIM_Y:t.y>f.DIM_Y&&(t.y=t.y%f.DIM_Y)}}f.DIM_X=1e3,f.DIM_Y=600,f.NUM_ASTEROIDS=1;var p=f,m=s(0),v=s.n(m);class g{constructor(t,e){this.game=t,this.ctx=e}bindKeyHandlers(){const t=this.ship;Object.keys(g.MOVES).forEach(e=>{const s=g.MOVES[e];v()(e,()=>{t.power(s)})}),v()("space",()=>{t.fireBullet()})}start(){this.bindKeyHandlers(),this.lastTime=0,requestAnimationFrame(this.animate.bind(this))}animate(t){const e=t-this.lastTime;this.game.step(e),this.game.draw(this.ctx),this.lastTime=t,requestAnimationFrame(this.animate.bind(this))}}g.MOVES={up:[0,-1],down:[0,1],left:[-1,0],right:[1,0]};var y=g;document.addEventListener("DOMContentLoaded",()=>{const t=document.querySelector("canvas"),e=t.getContext("2d");t.width=p.DIM_X,t.height=p.DIM_Y;const s=new p;new y(s,e).start()})}]);
//# sourceMappingURL=bundle.js.map